---
phase: 04-skills
plan: 04
type: execute
wave: 3
depends_on: ["04-02", "04-03"]
files_modified:
  - src/memory/context.ts
autonomous: true

must_haves:
  truths:
    - "Claude suggests skill creation after recognizing repeated patterns"
    - "Suggestions are natural language, not rigid prompts"
    - "User must approve before skill creation begins"
  artifacts:
    - path: "src/memory/context.ts"
      provides: "Proactive skill suggestion instructions"
      contains: "skill-creation-awareness"
  key_links:
    - from: "src/memory/context.ts"
      to: "skill-creator"
      via: "instructions reference"
      pattern: "skill-creator"
---

<objective>
Add proactive skill creation awareness to Claude's system prompt - instructions for recognizing repeated patterns and suggesting skill creation to the user.

Purpose: Bot should proactively offer to create skills when it notices repeated task patterns, per SKILL-04 requirement.
Output: Updated system prompt with skill creation awareness.
</objective>

<execution_context>
@/home/soham/.claude/get-shit-done/workflows/execute-plan.md
@/home/soham/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-skills/04-CONTEXT.md
@.planning/phases/04-skills/04-RESEARCH.md
@.planning/phases/04-skills/04-02-SUMMARY.md
@src/memory/context.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add skill creation awareness to system prompt</name>
  <files>src/memory/context.ts</files>
  <action>
Add new function getSkillCreationInstructions() and integrate into buildSystemPrompt():

1. **Create getSkillCreationInstructions() function:**
   ```typescript
   function getSkillCreationInstructions(): string {
     return `<skill-creation-awareness>
   ## Proactive Skill Creation

   When you notice the user repeatedly asking for similar tasks, consider suggesting:

   "I've noticed you often ask me to [task pattern]. Would you like me to create a skill for this so it's faster next time?"

   ### Patterns That Indicate Skill Potential

   - Same type of transformation (e.g., "summarize this", "format as...")
   - Repeated workflows (e.g., "check X then do Y")
   - Consistent output formats requested
   - Similar tool sequences used repeatedly

   ### How to Suggest

   1. **Observe**: Note when similar tasks recur (roughly 3+ times)
   2. **Suggest naturally**: "This seems like something we do often. Want me to turn this into a reusable skill?"
   3. **If approved**: Use the skill-creator skill to build and install the skill
   4. **Test**: Verify the skill works, then mention it's ready for use

   ### Rules

   - NEVER create skills without asking first
   - User may prefer case-by-case handling - respect that
   - Keep suggestions brief and natural, not robotic
   - If user declines, don't suggest again for similar tasks

   ### Skill Usage

   When a task matches an installed skill, use it:
   - Explain you're using the skill: "I'll use the summarize skill for this"
   - Execute the skill
   - Skills save time and ensure consistent results

   </skill-creation-awareness>`;
   }
   ```

2. **Modify buildSystemPrompt():**
   - Add skill creation instructions after skills context:
   ```typescript
   export function buildSystemPrompt(): string {
     const identity = loadIdentity();
     const instructions = getRetrievalInstructions();
     const skills = getSkillsContext();
     const skillCreation = getSkillCreationInstructions();
     return identity + '\n\n' + instructions + '\n\n' + skills + '\n\n' + skillCreation;
   }
   ```
  </action>
  <verify>`npx tsc --noEmit` passes; buildSystemPrompt includes skill-creation-awareness section</verify>
  <done>Proactive skill creation instructions added to Claude's system prompt</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` compiles without errors
2. Inspect system prompt output: `node -e "import('./dist/memory/context.js').then(m => console.log(m.buildSystemPrompt()))"` includes skill-creation-awareness
3. Code review: instructions follow CONTEXT.md decision (Claude proactively suggests, asks first)
4. **Skills visibility E2E:** Via Telegram, ask Claude "what skills do you have?" - Claude should list available skills from system prompt context, confirming auto-selection awareness works (this validates SKILL-02)
</verification>

<success_criteria>
- System prompt contains skill-creation-awareness section
- Instructions align with CONTEXT.md: suggest after patterns, ask before creating
- No rigid approval flows, natural conversation style
</success_criteria>

<output>
After completion, create `.planning/phases/04-skills/04-04-SUMMARY.md`
</output>
